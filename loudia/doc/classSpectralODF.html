<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Loudia: SpectralODF Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>SpectralODF Class Reference</h1><!-- doxytag: class="SpectralODF" --><!-- doxytag: inherits="SpectralODFBase" -->Algorithm to perform onset detection functions on vectors of Complex values representing the <a class="el" href="classFFT.html" title="Algorithm to perform a Fast Fourier Transform of a vector of Real values.">FFT</a> of a signal.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="SpectralODF_8h-source.html">SpectralODF.h</a>&gt;</code>
<p>
Inherits SpectralODFBase.
<p>

<p>
<a href="classSpectralODF-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Types</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSpectralODF.html#ffc02a3109a16dcdb846fa0de4ff52bc">ODFMethod</a> { <br>
&nbsp;&nbsp;<a class="el" href="classSpectralODF.html#ffc02a3109a16dcdb846fa0de4ff52bca76c44edb76686fa1bbda9ebe69c7857">FLUX</a> =  0, 
<a class="el" href="classSpectralODF.html#ffc02a3109a16dcdb846fa0de4ff52bc15727a7fb434567bfd4c0898597996ef">HIGH_FREQUENCY_CONTENT</a> =  1, 
<a class="el" href="classSpectralODF.html#ffc02a3109a16dcdb846fa0de4ff52bcc711987ec5afb27eec8dcee1353deb76">PHASE_DEVIATION</a> =  2, 
<a class="el" href="classSpectralODF.html#ffc02a3109a16dcdb846fa0de4ff52bcf70b8295c674530a7230501a07118fca">WEIGHTED_PHASE_DEVIATION</a> =  3, 
<br>
&nbsp;&nbsp;<a class="el" href="classSpectralODF.html#ffc02a3109a16dcdb846fa0de4ff52bcd485584db45ce84a4ba7c2c12b095e52">NORM_WEIGHTED_PHASE_DEVIATION</a> =  4, 
<a class="el" href="classSpectralODF.html#ffc02a3109a16dcdb846fa0de4ff52bc8f773b1e6bfd5d31b44bc601d63fd230">MODIFIED_KULLBACK_LIEBLER</a> =  5, 
<a class="el" href="classSpectralODF.html#ffc02a3109a16dcdb846fa0de4ff52bce849eb6955a6f4a8d10507c61fa1da3d">COMPLEX_DOMAIN</a> =  6, 
<a class="el" href="classSpectralODF.html#ffc02a3109a16dcdb846fa0de4ff52bcd1f15d3e7f868170badf652700ddc68a">RECTIFIED_COMPLEX_DOMAIN</a> =  7, 
<br>
&nbsp;&nbsp;<a class="el" href="classSpectralODF.html#ffc02a3109a16dcdb846fa0de4ff52bc1d261f1a03b2c01cc85482f2ef89f3b2">CENTER_OF_GRAVITY</a> =  8
<br>
 }</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Specifies the method for calculating the onset detection function to be used.  <a href="classSpectralODF.html#ffc02a3109a16dcdb846fa0de4ff52bc">More...</a><br></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSpectralODF.html#f82edd5676470862c68ae9f0bbba1940">SpectralODF</a> (int fftSize=1024, <a class="el" href="classSpectralODF.html#ffc02a3109a16dcdb846fa0de4ff52bc">ODFMethod</a> odfMethod=COMPLEX_DOMAIN)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSpectralODF.html#0aec049f0a39f8a32f1e4792e82060de">~SpectralODF</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSpectralODF.html#36385b79b21427494fa56162b288b22e">process</a> (const MatrixXC &amp;ffts, MatrixXR *odfs)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classSpectralODF.html#ffc02a3109a16dcdb846fa0de4ff52bc">ODFMethod</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSpectralODF.html#b816ffb13d3ee67e543880e9b78c7f24">odfMethod</a> () const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSpectralODF.html#4a2b5f2f299e0659c9ab9be33499accb">setOdfMethod</a> (<a class="el" href="classSpectralODF.html#ffc02a3109a16dcdb846fa0de4ff52bc">ODFMethod</a> method, bool callSetup=true)</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Algorithm to perform onset detection functions on vectors of Complex values representing the <a class="el" href="classFFT.html" title="Algorithm to perform a Fast Fourier Transform of a vector of Real values.">FFT</a> of a signal. 
<p>
This class wraps several kind of spectral Onset Detection Functions (ODF). A spectral onset detection function is a function mapping from an <a class="el" href="classFFT.html" title="Algorithm to perform a Fast Fourier Transform of a vector of Real values.">FFT</a> of an audio signal to a Real value. The onset detection function represents a value proportional to the probability of the frame being an onset.<p>
The algorithm takes as input N-point vectors of Complex values and returns Real values.<p>
5 types of ODF methods are implemented:<ol type=1>
<li>Spectral flux</li><li>High frequency content</li><li>Phase deviation</li><li>Weighted phase deviation</li><li>Normalized weighted phase deviation</li><li>Modified Kullback-Liebler</li><li>Complex domain</li><li>Rectified complex domain</li><li>Peak center of gravity</li></ol>
<p>
The Phase deviation, Weighted phase deviation, Normalized weighted phase deviation, Complex domain and Rectified complex domain methods require the 2 past <a class="el" href="classFFT.html" title="Algorithm to perform a Fast Fourier Transform of a vector of Real values.">FFT</a> frames. Therefore if any of these methods are specified, the <a class="el" href="classSpectralODF.html#36385b79b21427494fa56162b288b22e">process()</a> method would require an input matrix of at least 3 rows and will output ODF values for all the rows but the first two.<p>
The Spectral flux method requires the past <a class="el" href="classFFT.html" title="Algorithm to perform a Fast Fourier Transform of a vector of Real values.">FFT</a> frame. Therefore if this method is used, the <a class="el" href="classSpectralODF.html#36385b79b21427494fa56162b288b22e">process()</a> method would require an input matrix of at least 2 rows and will output ODF values for all the rows but the first.<p>
The ODF method can be selected using the <a class="el" href="classSpectralODF.html#4a2b5f2f299e0659c9ab9be33499accb">setOdfMethod()</a> taking as argument an ODFMethod.<p>
This function is often use to perform beat estimation and event segmentation tasks.<p>
<dl class="author" compact><dt><b>Author:</b></dt><dd>Ricard Marxer</dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="classFFT.html" title="Algorithm to perform a Fast Fourier Transform of a vector of Real values.">FFT</a> </dd></dl>
<hr><h2>Member Enumeration Documentation</h2>
<a class="anchor" name="ffc02a3109a16dcdb846fa0de4ff52bc"></a><!-- doxytag: member="SpectralODF::ODFMethod" ref="ffc02a3109a16dcdb846fa0de4ff52bc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classSpectralODF.html#ffc02a3109a16dcdb846fa0de4ff52bc">ODFMethod</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Specifies the method for calculating the onset detection function to be used. 
<p>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="classSpectralODF.html#b816ffb13d3ee67e543880e9b78c7f24">odfMethod</a> </dd></dl>
<dl compact><dt><b>Enumerator: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="ffc02a3109a16dcdb846fa0de4ff52bca76c44edb76686fa1bbda9ebe69c7857"></a><!-- doxytag: member="FLUX" ref="ffc02a3109a16dcdb846fa0de4ff52bca76c44edb76686fa1bbda9ebe69c7857" args="" -->FLUX</em>&nbsp;</td><td>
Spectral flux method </td></tr>
<tr><td valign="top"><em><a class="anchor" name="ffc02a3109a16dcdb846fa0de4ff52bc15727a7fb434567bfd4c0898597996ef"></a><!-- doxytag: member="HIGH_FREQUENCY_CONTENT" ref="ffc02a3109a16dcdb846fa0de4ff52bc15727a7fb434567bfd4c0898597996ef" args="" -->HIGH_FREQUENCY_CONTENT</em>&nbsp;</td><td>
High frequency content method </td></tr>
<tr><td valign="top"><em><a class="anchor" name="ffc02a3109a16dcdb846fa0de4ff52bcc711987ec5afb27eec8dcee1353deb76"></a><!-- doxytag: member="PHASE_DEVIATION" ref="ffc02a3109a16dcdb846fa0de4ff52bcc711987ec5afb27eec8dcee1353deb76" args="" -->PHASE_DEVIATION</em>&nbsp;</td><td>
Phase deviation method </td></tr>
<tr><td valign="top"><em><a class="anchor" name="ffc02a3109a16dcdb846fa0de4ff52bcf70b8295c674530a7230501a07118fca"></a><!-- doxytag: member="WEIGHTED_PHASE_DEVIATION" ref="ffc02a3109a16dcdb846fa0de4ff52bcf70b8295c674530a7230501a07118fca" args="" -->WEIGHTED_PHASE_DEVIATION</em>&nbsp;</td><td>
Weighted phase deviation method </td></tr>
<tr><td valign="top"><em><a class="anchor" name="ffc02a3109a16dcdb846fa0de4ff52bcd485584db45ce84a4ba7c2c12b095e52"></a><!-- doxytag: member="NORM_WEIGHTED_PHASE_DEVIATION" ref="ffc02a3109a16dcdb846fa0de4ff52bcd485584db45ce84a4ba7c2c12b095e52" args="" -->NORM_WEIGHTED_PHASE_DEVIATION</em>&nbsp;</td><td>
Normalized weighted phase deviation method </td></tr>
<tr><td valign="top"><em><a class="anchor" name="ffc02a3109a16dcdb846fa0de4ff52bc8f773b1e6bfd5d31b44bc601d63fd230"></a><!-- doxytag: member="MODIFIED_KULLBACK_LIEBLER" ref="ffc02a3109a16dcdb846fa0de4ff52bc8f773b1e6bfd5d31b44bc601d63fd230" args="" -->MODIFIED_KULLBACK_LIEBLER</em>&nbsp;</td><td>
Modified Kullback-Liebler method </td></tr>
<tr><td valign="top"><em><a class="anchor" name="ffc02a3109a16dcdb846fa0de4ff52bce849eb6955a6f4a8d10507c61fa1da3d"></a><!-- doxytag: member="COMPLEX_DOMAIN" ref="ffc02a3109a16dcdb846fa0de4ff52bce849eb6955a6f4a8d10507c61fa1da3d" args="" -->COMPLEX_DOMAIN</em>&nbsp;</td><td>
Complex domain method </td></tr>
<tr><td valign="top"><em><a class="anchor" name="ffc02a3109a16dcdb846fa0de4ff52bcd1f15d3e7f868170badf652700ddc68a"></a><!-- doxytag: member="RECTIFIED_COMPLEX_DOMAIN" ref="ffc02a3109a16dcdb846fa0de4ff52bcd1f15d3e7f868170badf652700ddc68a" args="" -->RECTIFIED_COMPLEX_DOMAIN</em>&nbsp;</td><td>
Rectified complex domain method </td></tr>
<tr><td valign="top"><em><a class="anchor" name="ffc02a3109a16dcdb846fa0de4ff52bc1d261f1a03b2c01cc85482f2ef89f3b2"></a><!-- doxytag: member="CENTER_OF_GRAVITY" ref="ffc02a3109a16dcdb846fa0de4ff52bc1d261f1a03b2c01cc85482f2ef89f3b2" args="" -->CENTER_OF_GRAVITY</em>&nbsp;</td><td>
Peak center of gravity method </td></tr>
</table>
</dl>

</div>
</div><p>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="f82edd5676470862c68ae9f0bbba1940"></a><!-- doxytag: member="SpectralODF::SpectralODF" ref="f82edd5676470862c68ae9f0bbba1940" args="(int fftSize=1024, ODFMethod odfMethod=COMPLEX_DOMAIN)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSpectralODF.html">SpectralODF</a>           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>fftSize</em> = <code>1024</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classSpectralODF.html#ffc02a3109a16dcdb846fa0de4ff52bc">ODFMethod</a>&nbsp;</td>
          <td class="paramname"> <em>odfMethod</em> = <code>COMPLEX_DOMAIN</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Constructs a spectral onset detection function object with the specified <em>fftSize</em> and <em>odfMethod</em> settings.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fftSize</em>&nbsp;</td><td>size of the input <a class="el" href="classFFT.html" title="Algorithm to perform a Fast Fourier Transform of a vector of Real values.">FFT</a> frames, must be &gt; 0.</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>odfMethod</em>&nbsp;</td><td>the onset detection method to be used </td></tr>
  </table>
</dl>

<p>References <a class="el" href="SpectralODF_8cpp-source.html#l00108">setOdfMethod()</a>.</p>

</div>
</div><p>
<a class="anchor" name="0aec049f0a39f8a32f1e4792e82060de"></a><!-- doxytag: member="SpectralODF::~SpectralODF" ref="0aec049f0a39f8a32f1e4792e82060de" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">~<a class="el" href="classSpectralODF.html">SpectralODF</a>           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Destroys the algorithm and frees its resources. 
</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="36385b79b21427494fa56162b288b22e"></a><!-- doxytag: member="SpectralODF::process" ref="36385b79b21427494fa56162b288b22e" args="(const MatrixXC &amp;ffts, MatrixXR *odfs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void process           </td>
          <td>(</td>
          <td class="paramtype">const MatrixXC &amp;&nbsp;</td>
          <td class="paramname"> <em>ffts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MatrixXR *&nbsp;</td>
          <td class="paramname"> <em>odfs</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Calculates the onset detection method on each of the rows of <em>ffts</em> and puts the resulting onset detection function values in the rows of <em>odfs</em>.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ffts</em>&nbsp;</td><td>matrix of Complex values. The number of columns of <em>ffts</em> must be equal to the fftSize / 2 + 1. Some onset detection methods require a minimum of 2 (or 3) rows to calculate the one onset detection function value. In this cases onset detection values for the first 2 (or 3 respectively) rows will not be output.</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>odfs</em>&nbsp;</td><td>pointer to a single-column matrix of Real values for the output. The matrix should have the same number of rows as <em>ffts</em> (minus 1 or 2 depending on the method used) and 1 single column.</td></tr>
  </table>
</dl>
Note that if the output matrix is not of the required size it will be resized, reallocating a new memory space if necessary. 
</div>
</div><p>
<a class="anchor" name="b816ffb13d3ee67e543880e9b78c7f24"></a><!-- doxytag: member="SpectralODF::odfMethod" ref="b816ffb13d3ee67e543880e9b78c7f24" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSpectralODF.html#ffc02a3109a16dcdb846fa0de4ff52bc">SpectralODF::ODFMethod</a> odfMethod           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns the method for calculating the spectral onset detection function.<p>
By default it is COMPLEX_DOMAIN. 
</div>
</div><p>
<a class="anchor" name="4a2b5f2f299e0659c9ab9be33499accb"></a><!-- doxytag: member="SpectralODF::setOdfMethod" ref="4a2b5f2f299e0659c9ab9be33499accb" args="(ODFMethod method, bool callSetup=true)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setOdfMethod           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSpectralODF.html#ffc02a3109a16dcdb846fa0de4ff52bc">ODFMethod</a>&nbsp;</td>
          <td class="paramname"> <em>method</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>callSetup</em> = <code>true</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Specifies the <em>method</em> for calculating the spectral onset detection function.<p>
Note that PHASE_DEVIATION, WEIGHTED_PHASE_DEVIATION, NORM_WEIGHTED_PHASE_DEVIATION, COMPLEX_DOMAIN and RECTIFIED_COMPLEX_DOMAIN methods require at least 3 <a class="el" href="classFFT.html" title="Algorithm to perform a Fast Fourier Transform of a vector of Real values.">FFT</a> frames, and therefore the input matrix to the <a class="el" href="classSpectralODF.html#36385b79b21427494fa56162b288b22e">process()</a> method must have at least 3 rows. In these cases the output matrix will be 2 rows smaller than the input, since it only calculates ODF values for all the rows but the first two.<p>
Note that SPECTRAL_FLUX method requires at least 2 <a class="el" href="classFFT.html" title="Algorithm to perform a Fast Fourier Transform of a vector of Real values.">FFT</a> frames, and therefore the input matrix to the <a class="el" href="classSpectralODF.html#36385b79b21427494fa56162b288b22e">process()</a> method must have at least 2 rows. In this case the output matrix will be 1 row smaller than the input, since it only calculates ODF values for all the rows but the first.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>method</em>&nbsp;</td><td>the method used for calculating the spectral onset detection function.</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>callSetup</em>&nbsp;</td><td>a flag specifying whether the setup() method must be called after setting the parameter. </td></tr>
  </table>
</dl>

<p>Referenced by <a class="el" href="SpectralODF_8cpp-source.html#l00035">SpectralODF()</a>.</p>

</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="SpectralODF_8h-source.html">SpectralODF.h</a><li>SpectralODF.cpp</ul>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Tue Mar 31 20:38:34 2009 for Loudia by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.6 </small></address>
</body>
</html>
